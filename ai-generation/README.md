# Connector Integration AI

## Problem Statement

To generate, build, and test connector code autonomously, without any manual intervention. This project specifically addresses the migration of authorize flows from any existing connector to Hyperswitch.

## Workflow Diagram 
![ai-connector-integration](https://github.com/user-attachments/assets/b6097266-19bc-4b07-b306-e4fc879e6c5c)

## Working Demo Video 
* https://drive.google.com/file/d/1GKobc_MdTOtpsu2BOau_cHRQFOdEXv5r/view?usp=sharing
## Detailed Explanation Video 
* https://drive.google.com/file/d/1LM_ojHJX4FVAAGtB0trDk6dWxDMIjw3M/view?usp=sharing

## Phases

The broader project encompasses several migration and integration strategies:

1.  **Migration from Hyperswitch (Current Focus)**
2.  Migration from Euler
3.  Third-party reference (e.g., Active Merchant)

Currently, we are focused on the first phase: **Migration from Hyperswitch**.


## Achievement in above demo
* Integrated Authorize flow for connector Checkout
* We were able to build the project successsfully with two error fixes with manual intervention.

## Auto generated things by AI
* Workflow that we are feeding to the AI is auto generated.
* Connector support to UCS.
* Integration of Authorize flow.
* Debugging and generating error tracks.
* logging each step being followed in the workflow.

## Approach

Our approach leverages a set of structured documents to guide the AI in the code generation and troubleshooting process:

*   `build_workflow.md`: Contains the step-by-step process for building the connector.
*   `connector_integration_guide.md`: Provides references and examples for the necessary code changes.
*   `error_build.md`: A knowledge base of common build errors and their resolutions.
*   `error_test.md`: A knowledge base for common test errors and their resolutions.

## Tools Used

*   **Cursor**: The AI-powered code editor used for development and interaction.
*   **Gemini 2.5 Pro (experimental 03-25)**: The underlying large language model powering the AI capabilities.

## How to Use

1.  **Install Cursor**: Ensure you have Cursor installed and set up.
2.  **Checkout to this branch** for the context files [branch](https://github.com/juspay/connector-service/tree/ai-connector-integration) or download from [drive](https://drive.google.com/drive/folders/1NoMmVH4QO8x6SzGNYSdyZb6UQzduN9Pg?usp=sharing) and keep the files under `memory_bank`.
3.  **Provide Context Files**: Add the following files as context to the AI assistant within Cursor:
    *   `build_workflow.md`
    *   `connector_integration_guide.md`
    *   The `connector.rs` file from the Hyperswitch documentation/repository for the connector being migrated.
    *   The `transformer.rs` file from the Hyperswitch documentation/repository for the connector being migrated.
    *   For better accuracy, also include the specific files where changes are anticipated, such as:
        *   `types.rs` (of the connector)
        *   `connector.rs` (of the connector)
        *   Relevant `connector_types.rs` (Hyperswitch core types if needed)
4.  **Paste the Prompt**: Use the following prompt structure (replace `{{prompt}}` with your specific instructions):

    ```
    Run the workflow for integrating {{authorize}} flow for connector {{paypal}} with reference from hyperswitch. Follow each steps mentioned in build_workflow.md.
    ```

## Disclaimer

1.  **Accuracy**: The AI-generated code is not always successful on the first attempt. It currently achieves an accuracy of approximately **70%** and above. Manual review and potential modifications may be necessary.
2.  **AI-Generated Files**: All primary output files related to the connector integration are generated by the AI.
3.  **Evolving Knowledge Base**: As this system is used more frequently, the `error_build.md` and `error_test.md` (memory bank) will be updated, improving future accuracy and reducing troubleshooting time.
4.  **Experimental Stage**: This is an ongoing project, and the tools and methodologies are subject to refinement.

## Cost
* We have used Cursor Pro subscription with $20 per month.
* This subscription has limited 500 request per month where 25 calls in a chat is considered as one request.

## Benefits (10x Improvement)

*   **Reduced Integration Time**: Connector integration for a single flow can be reduced from approximately 2 days to 2 hours (1 hour for generation and 1 hour for resolving any issues).
*   **Exploration of New Technologies**: Frees up developer time to explore and adopt new technologies and patterns.

## Next Steps

*   **End-to-End API Testing**: Implement connector API testing for comprehensive end-to-end validation.
*   **MCP for Type Extraction**: Explore using a Model Context Protocol (MCP) to automatically extract and structure types from Hyperswitch.
*   **Support for Other Flows**: Extend the AI's capabilities to support other payment flows beyond authorize (e.g., capture, refund, void).
*   **Optimize Knowledge Base**:
    *   Improve how the knowledge base is searched (e.g., by indexing error types).
    *   Refine how the knowledge base is updated (e.g., by implementing a more granular file structure for errors).

## Team
* [**Sweta Sharma**](https://github.com/Sweta-Kumari-Sharma) 
* [**Chaitak Gorai**](https://github.com/chaitak-gorai)
