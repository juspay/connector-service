# Changelog

## [2025-01-XX] - Billdesk Connector Addition

### Added
- New Billdesk connector implementation for UCS v2
- Payment methods supported: UPI
- Transaction flows: Authorize, PSync
- Support for Billdesk's payment gateway API with proper authentication
- Dynamic request/response handling using UCS v2 macro framework

### Files Created/Modified
- `src/connectors/billdesk.rs` - Main connector implementation using UCS v2 macros
- `src/connectors/billdesk/transformers.rs` - Request/response transformers for Billdesk API
- `src/connectors/billdesk/constants.rs` - API constants and endpoints
- `src/connectors/billdesk/api.rs` - API endpoint management
- `src/connectors.rs` - Added connector registration
- `src/types.rs` - Added connector to type system
- `backend/domain_types/src/connector_types.rs` - Added Billdesk to ConnectorEnum
- `backend/domain_types/src/types.rs` - Added Billdesk to Connectors struct
- `backend/grpc-api-types/proto/payment.proto` - Added Billdesk to gRPC enum

### Technical Details
- Migrated from Hyperswitch/Euler Haskell implementation to UCS v2 Rust
- Uses UCS v2 macro framework for all trait implementations (no manual code)
- Implements proper error handling and status mapping from Billdesk responses
- Full type safety with guard rails using domain types
- Amount handling using StringMinorUnit converter for Billdesk API compatibility
- UPI payment method support with VPA handling
- Dynamic extraction of all request data from router data (no hardcoded values)
- Proper authentication header handling for Billdesk API keys
- Test/production environment URL switching based on configuration

### API Integration
- Base URLs: UAT (https://uat.billdesk.com) and Production (https://www.billdesk.com)
- Request IDs: BDRDF011 for UPI initiation, BDRDF002 for status checks
- Message format: Pipe-separated values for transaction data
- Response handling: Success/failure status mapping with proper error codes
- Redirect form handling for UPI payment flows

### Compliance
- Follows UCS v2 macro framework requirements strictly
- No manual trait implementations - all generated by macros
- Proper type safety with Secret<String> for sensitive data
- MinorUnit usage for all monetary values
- Dynamic data extraction from router data only
- Complete error handling with proper status mapping