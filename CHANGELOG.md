# Changelog

## [2024-01-XX] - ZaakPay Connector Addition

### Added
- New ZaakPay connector implementation
- Payment methods supported: UPI (Unified Payments Interface)
- Transaction flows: Authorize (UPI Intent/Collect), PSync (Payment Status Sync), RSync (Refund Status Sync)

### Files Created/Modified
- `backend/connector-integration/src/connectors/zaakpay.rs` - Main connector implementation using UCS v2 macro framework
- `backend/connector-integration/src/connectors/zaakpay/transformers.rs` - Request/response transformers for ZaakPay API
- `backend/connector-integration/src/connectors/zaakpay/constants.rs` - API constants and endpoints
- `backend/connector-integration/src/connectors.rs` - Added ZaakPay connector registration
- `backend/connector-integration/src/types.rs` - Added ZaakPay to connector factory
- `backend/domain_types/src/connector_types.rs` - Added ZaakPay to ConnectorEnum
- `backend/grpc-api-types/proto/payment.proto` - Added ZAAKPAY = 94 to Connector enum

### Technical Details
- Migrated from Hyperswitch/Euler Haskell implementation
- Uses UCS v2 macro framework for all trait implementations (mandatory)
- Implements proper error handling and status mapping
- Full type safety with guard rails (Secret<String> for sensitive data, MinorUnit for amounts)
- Amount converter: StringMinorUnit (amounts in minor units as strings)
- Authentication: Bearer token via Authorization header
- Webhook support with signature verification using HMAC-SHA256
- UPI-specific business logic preserved from original Haskell implementation
- All request body values extracted dynamically from router data (no hardcoded values)

### API Integration
- Base URL: https://zaakpay.com
- Endpoints: /transact (Authorize), /check (PSync/RSync)
- Request format: JSON with checksum verification
- Response handling: Proper status code mapping (100=Success, 101=Pending, 102=Failure)
- Redirect support for UPI payment flows

### Compliance
- Follows UCS v2 macro framework requirements strictly
- No manual trait implementations - all generated by macros
- Proper amount framework implementation with StringMinorUnit converter
- Type-safe domain types for all fields
- Comprehensive error handling with proper error types